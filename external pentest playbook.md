## External Pentest Playbook

- trying to hack into an organizaion from outside of that organization network. even we can't get their vpn. so what we can do? have different methodologies compared to web pentest.

## more focus on the methodologies

- the tools might change, but the methodologies don't change.

## Checklist, FTW

- prepare checklist
- to do
- scope
- target
- password spraying
- logon portal

![alt text](images/image-66.png)

## Rules of Engagement

![alt text](images/image-67.png)
please dont start do any pentest before rules of engagement signed.

## verifying scope

- this is very crucial, to avoid pentesting wrong scope or company.
  ![alt text](images/image-68.png)
  https://www.he.net

## Client Communication

- inform client which scope will be tested within certain time, inform anycritical issue on the pentest scope.
![alt text](images/image-69.png)

## Attack Strategy

- think of external pentest like home security
- low chance of rce, high chance of weak passwords
- OSINT is your best friend

## Vulneraboloty Scanning

- scan by using nessus
- better run on window lg smooth
![alt text](images/image-70.png)
- nessus file report ni boleh export
![alt text](images/image-71.png)


# OSINT Overview

## Hunting Breach Credential

- breach parser
![alt text](images/image-72.png)
- can confirm and geet some pattern of the username and password. such as email will consist of firstname and last name.

## Weak password requirement policy

![alt text](images/image-73.png)

## Attacking login portals

 - login portal to attack
 - list of possible employees/emails
 - password strategies to employ
 - identify password policy (penting part ni)
 - password boleh jadi lebihkurang jer macam username/email
 - tukar huruf dengan nombor tesla = tesl4

 ## Password Spraying O365

![alt text](images/image-74.png)
*hacking.pem ni datang dari aws punya ec2

trevorspray: by right the picture dont use current ip address to perform spray, they used diff vps to avoid get blocked from the spray.

before spraying kne tahu account lock out policy. kadang bila 5 kali dah salah nnti die akan. block account daripada log in.

 ## Password Spraying OWA (Outlook Web Access)

 tool: metasploit
 - search owa
![alt text](images/image-75.png) : use 6

## Attacking other portals
pakai intruder burpsuite

## Bypass MFA

- MFSweep

## Common Pentest Finding

- insifficient Authentication Controls
- Weak Password Policy (OSINT) check on sign up
![alt text](images/image-76.png)
- insufficient patching
- default credential
![alt text](images/image-77.png)
- insufficient encryption
![alt text](images/image-78.png)
- information disclosure
![alt text](images/image-79.png)
![alt text](images/image-80.png)
- username enumeration
- default web pages (apache, tomcat, phpinfo)
![alt text](images/image-81.png)
- open mail relay
![alt text](images/image-82.png)
https://www.blackhillsinfosec.com/how-to-test-for-open-mail-relays/
- IKE (Internet Key Exchange) Aggresive mode
- unexpected Perimeter Services
- insufficient traffic blocking
![alt text](images/image-83.png)
sepatutnya block website dekat company yg tak berkaitan.
- undetected malicious activity
![alt text](images/image-84.png)
- Historical Account Comproise
avoid repeat the same password


## Client Debriefs
